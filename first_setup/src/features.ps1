function Features {
    $Enabled = @(
        "Printing-PrintToPDFServices-Features",
        "Windows-Defender-Default-Definitions",
        "Printing-XPSServices-Features",
        "SearchEngine-Client-Package",
        "MSRDC-Infrastructure",
        "WorkFolders-Client",
        "Printing-Foundation-Features",
        "FaxServicesClientPackage",
        "MicrosoftWindowsPowerShellV2Root",
        "Printing-Foundation-InternetPrinting-Client",
        "MicrosoftWindowsPowerShellV2",
        "NetFx4-AdvSrvs",
        "NetFx4Extended-ASPNET45",
        "IIS-WebServerRole",
        "IIS-WebServer",
        "IIS-CommonHttpFeatures",
        "IIS-ApplicationDevelopment",
        "IIS-NetFxExtensibility45",
        "IIS-Security",
        "IIS-RequestFiltering",
        "IIS-WebServerManagementTools",
        "IIS-ManagementScriptingTools",
        "WAS-WindowsActivationService",
        "WAS-ProcessModel",
        "WAS-ConfigurationAPI",
        "IIS-DefaultDocument",
        "IIS-ASPNET45",
        "IIS-CGI",
        "IIS-ISAPIFilter",
        "IIS-ISAPIExtensions",
        "IIS-ManagementConsole",
        "IIS-ManagementService",
        "IIS-WindowsAuthentication",
        "IIS-DigestAuthentication",
        "SMB1Protocol",
        "SMB1Protocol-Client",
        "SMB1Protocol-Server",
        "SMB1Protocol-Deprecation",
        "MediaPlayback",
        "WindowsMediaPlayer",
        "Microsoft-Windows-NetFx3-OC-Package",
        "Microsoft-Windows-NetFx4-US-OC-Package",
        "Microsoft-Windows-Client-EmbeddedExp-Package",
        "Microsoft-Windows-NetFx3-WCF-OC-Package",
        "Microsoft-Windows-NetFx4-WCF-US-OC-Package",
        "SmbDirect",
        "Internet-Explorer-Optional-amd64"
    )
    $Disabled = @(
        "TelnetClient",
        "TFTP",
        "TIFFIFilter",
        "LegacyComponents",
        "DirectPlay",
        "Printing-Foundation-LPDPrintService",
        "Printing-Foundation-LPRPortMonitor",
        "Printing-Foundation-LPRPortMonitor",
        "SimpleTCP",
        "Windows-Identity-Foundation",
        "Microsoft-Windows-Subsystem-Linux",
        "HypervisorPlatform",
        "VirtualMachinePlatform",
        "Client-ProjFS",
        "IIS-HttpErrors",
        "IIS-HttpRedirect",
        "IIS-NetFxExtensibility",
        "IIS-HealthAndDiagnostics",
        "IIS-HttpLogging",
        "IIS-LoggingLibraries",
        "IIS-RequestMonitor",
        "IIS-HttpTracing",
        "IIS-URLAuthorization",
        "IIS-IPSecurity",
        "IIS-Performance",
        "IIS-HttpCompressionDynamic",
        "IIS-IIS6ManagementCompatibility",
        "IIS-Metabase",
        "WAS-NetFxEnvironment",
        "IIS-HostableWebCore",
        "IIS-StaticContent",
        "IIS-DirectoryBrowsing",
        "IIS-WebDAV",
        "IIS-WebSockets",
        "IIS-ApplicationInit",
        "IIS-ASPNET",
        "IIS-ASP",
        "IIS-ServerSideIncludes",
        "IIS-CustomLogging",
        "IIS-BasicAuthentication",
        "IIS-HttpCompressionStatic",
        "IIS-WMICompatibility",
        "IIS-LegacyScripts",
        "IIS-LegacySnapIn",
        "IIS-FTPServer",
        "IIS-FTPSvc",
        "IIS-FTPExtensibility",
        "WCF-Services45",
        "WCF-HTTP-Activation45",
        "WCF-TCP-Activation45",
        "WCF-Pipe-Activation45",
        "WCF-MSMQ-Activation45",
        "WCF-TCP-PortSharing45",
        "MSMQ-Container",
        "MSMQ-Server",
        "MSMQ-Triggers",
        "MSMQ-ADIntegration",
        "MSMQ-HTTP",
        "MSMQ-Multicast",
        "MSMQ-DCOMProxy",
        "WCF-HTTP-Activation",
        "WCF-NonHTTP-Activation",
        "IIS-CertProvider",
        "IIS-ClientCertificateMappingAuthentication",
        "IIS-IISCertificateMappingAuthentication",
        "IIS-ODBCLogging",
        "NetFx3",
        "Containers-DisposableClientVM",
        "Microsoft-Hyper-V-All",
        "Microsoft-Hyper-V",
        "Microsoft-Hyper-V-Tools-All",
        "Microsoft-Hyper-V-Management-PowerShell",
        "Microsoft-Hyper-V-Hypervisor",
        "Microsoft-Hyper-V-Services",
        "Microsoft-Hyper-V-Management-Clients",
        "HostGuardian",
        "Client-DeviceLockdown",
        "Client-EmbeddedShellLauncher",
        "Client-EmbeddedBootExp",
        "Client-EmbeddedLogon",
        "Client-KeyboardFilter",
        "Client-UnifiedWriteFilter",
        "DataCenterBridging",
        "DirectoryServices-ADAM-Client",
        "Windows-Defender-ApplicationGuard",
        "ServicesForNFS-ClientOnly",
        "ClientForNFS-Infrastructure",
        "NFS-Administration",
        "Containers",
        "MultiPoint-Connector",
        "MultiPoint-Connector-Services",
        "MultiPoint-Tools",
        "AppServerClient"
    )

    ForEach ($feature in $Enabled ) {
        Dism /online /Enable-Feature /FeatureName:$feature    
    }
    ForEach ($feature in $Disabled ) {
        Dism /online /Disable-Feature /FeatureName:$feature
    }
}

Features